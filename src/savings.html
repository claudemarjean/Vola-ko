<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ã‰pargne - Vola-ko</title>
  
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/theme.css">
  <link rel="stylesheet" href="/css/dark.css">
  <link rel="stylesheet" href="/css/animations.css">
  <link rel="stylesheet" href="/css/notifications.css">
  <link rel="stylesheet" href="/css/app-layout.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar-container"></aside>

    <!-- Main Content -->
    <main class="main-content">
      <div class="app-header">
        <div class="header-title">
          <h1 data-i18n="savings.title">ðŸ’¾ Mes Ã‰pargnes</h1>
          <p data-i18n="savings.subtitle">GÃ©rez vos Ã©conomies et objectifs financiers</p>
        </div>
        <button class="btn btn-primary" id="add-saving-btn">
          <span>âž•</span>
          <span data-i18n="savings.add">CrÃ©er une Ã©pargne</span>
        </button>
      </div>

      <!-- Summary Stats -->
      <div class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
        <div class="stat-card">
          <div class="stat-label" data-i18n="savings.total_saved">Total Ã©pargnÃ©</div>
          <div class="stat-value" id="total-saved">0 MGA</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" data-i18n="savings.active_goals">Objectifs actifs</div>
          <div class="stat-value" id="active-goals">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" data-i18n="savings.goal_progress">Progression moyenne</div>
          <div class="stat-value" id="goal-progress">0%</div>
        </div>
      </div>

      <!-- Savings List -->
      <div class="card" style="margin-top: var(--space-xl);">
        <div class="card-header" style="margin-bottom: var(--space-lg);">
          <h2 data-i18n="savings.my_savings">Mes Ã©pargnes</h2>
        </div>
        <div id="savings-list" class="savings-grid"></div>
        <div id="empty-state" class="empty-state" style="display: none;">
          <div class="empty-icon">ðŸ’¾</div>
          <h3 data-i18n="savings.no_savings">Aucune Ã©pargne pour le moment</h3>
          <p data-i18n="savings.create_first">CrÃ©ez votre premiÃ¨re Ã©pargne pour commencer Ã  Ã©conomiser</p>
          <button class="btn btn-primary" id="add-saving-empty-btn">
            <span data-i18n="savings.create">CrÃ©er une Ã©pargne</span>
          </button>
        </div>
      </div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" id="bottom-nav"></nav>
  </div>

  <!-- Modal: Add/Edit Saving -->
  <div class="modal" id="saving-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title" data-i18n="savings.add">CrÃ©er une Ã©pargne</h2>
        <button class="modal-close" id="close-saving-modal">âœ•</button>
      </div>
      <form id="saving-form">
        <div class="form-group">
          <label for="saving-name" data-i18n="savings.name">Nom de l'Ã©pargne</label>
          <input type="text" id="saving-name" class="form-input" required placeholder="Ex: Vacances 2026">
        </div>

        <div class="form-group">
          <label for="saving-type" data-i18n="savings.type">Type</label>
          <select id="saving-type" class="form-select" required>
            <option value="free" data-i18n="savings.type_free">Ã‰pargne libre</option>
            <option value="goal" data-i18n="savings.type_goal">Avec objectif</option>
          </select>
        </div>

        <div class="form-group">
          <label for="saving-initial" data-i18n="savings.initial_amount">Montant initial (MGA)</label>
          <input type="number" id="saving-initial" class="form-input" required min="0" value="0">
        </div>

        <div id="goal-fields" style="display: none;">
          <div class="form-group">
            <label for="saving-target" data-i18n="savings.target_amount">Montant cible (MGA)</label>
            <input type="number" id="saving-target" class="form-input" min="0">
          </div>

          <div class="form-group">
            <label for="saving-target-date" data-i18n="savings.target_date">Date cible</label>
            <input type="date" id="saving-target-date" class="form-input">
          </div>
        </div>

        <div class="form-group">
          <label for="auto-withdraw-enabled">Retrait automatique</label>
          <div style="display: flex; align-items: center; gap: var(--space-sm);">
            <input type="checkbox" id="auto-withdraw-enabled">
            <span>Activer un retrait automatique Ã  une date choisie</span>
          </div>
        </div>

        <div id="auto-withdraw-fields" style="display: none;">
          <div class="form-group">
            <label for="auto-withdraw-amount">Montant Ã  retirer (MGA)</label>
            <input type="number" id="auto-withdraw-amount" class="form-input" min="0" value="0">
          </div>

          <div class="form-group">
            <label for="auto-withdraw-date">Date de retrait automatique</label>
            <input type="date" id="auto-withdraw-date" class="form-input">
          </div>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn btn-secondary modal-close" data-i18n="common.cancel">Annuler</button>
          <button type="submit" class="btn btn-primary" data-i18n="common.save">Enregistrer</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal: Transaction (Add/Withdraw) -->
  <div class="modal" id="transaction-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="transaction-modal-title"></h2>
        <button class="modal-close" id="close-transaction-modal">âœ•</button>
      </div>
      <form id="transaction-form">
        <input type="hidden" id="transaction-saving-id">
        <input type="hidden" id="transaction-type">

        <div class="form-group">
          <label for="transaction-amount" data-i18n="savings.amount">Montant (MGA)</label>
          <input type="number" id="transaction-amount" class="form-input" required min="0">
        </div>

        <div class="form-group">
          <label for="transaction-date" data-i18n="savings.date">Date</label>
          <input type="date" id="transaction-date" class="form-input" required>
        </div>

        <div class="modal-actions">
          <button type="button" class="btn btn-secondary modal-close" data-i18n="common.cancel">Annuler</button>
          <button type="submit" class="btn btn-primary" data-i18n="common.confirm">Confirmer</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal: History -->
  <div class="modal" id="history-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="history-modal-title">Historique</h2>
        <button class="modal-close" id="close-history-modal">âœ•</button>
      </div>

      <div id="history-summary" class="stats-grid" style="grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));"></div>

      <div id="history-list" class="savings-grid"></div>
      <div id="history-empty" class="empty-state" style="display: none;">
        <div class="empty-icon">ðŸ“‹</div>
        <h3>Aucun mouvement</h3>
        <p>Ajoutez une opÃ©ration pour voir l'historique</p>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js"></script>
  <script type="module" src="/js/savings.js"></script>
</body>
</html>
